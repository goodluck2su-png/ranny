# 역헤드앤숄더 패턴 스캐너

KOSPI/KOSDAQ 시장에서 역헤드앤숄더(Inverse Head and Shoulders) 패턴을 자동으로 탐지하는 스캐너입니다.

## 기능

- **자동 패턴 탐지**: scipy를 활용한 저점 탐지 및 패턴 검증
- **신뢰도 점수**: 머리 깊이, 어깨 대칭성, 시간 대칭성 기반 점수 산출
- **차트 시각화**: 캔들차트에 패턴 포인트, 넥라인, 목표가/손절가 표시
- **웹 인터페이스**: Streamlit 기반 대화형 대시보드

## 패턴 조건

| 조건 | 설정값 |
|------|--------|
| 패턴 기간 | 60~200 거래일 |
| 어깨 가격 대칭성 | ±10% 이내 |
| 시간 대칭성 | 50% 이내 |
| 머리 깊이 | 어깨 평균 대비 10% 이상 |
| 선행 하락 | 고점 대비 -15% |

## 필터링 조건

| 조건 | 설정값 |
|------|--------|
| 시가총액 | 1,500억원 이상 |
| 현재가 | 30,000원 이상 |
| 일평균 거래대금 | 10억원 이상 |
| 제외 | 우선주, ETF/ETN, 스팩, 신규상장 6개월 |

## 설치

```bash
# 의존성 설치
pip install -r requirements.txt
```

## 실행

### CLI 실행
```bash
python main.py
```

### 웹앱 실행
```bash
streamlit run app.py
```

## 웹앱 사용법

1. **스캔 실행**: 사이드바에서 "스캔 실행" 버튼 클릭
2. **필터 조정**: 머리 깊이, 대칭성 슬라이더로 조건 조정
3. **종목 선택**: 드롭다운 또는 이전/다음 버튼으로 종목 탐색
4. **갤러리**: 상위 10개 종목 차트를 한눈에 확인

## 파일 구조

```
project ranny/
├── app.py              # Streamlit 웹앱
├── main.py             # CLI 실행 파일
├── requirements.txt    # 의존성
├── src/
│   ├── config.py           # 설정
│   ├── data_collector.py   # 데이터 수집
│   ├── pattern_detector.py # 패턴 탐지
│   └── chart_visualizer.py # 차트 생성
└── output/
    ├── results.csv     # 결과 CSV
    └── charts/         # 차트 이미지
```

## 신뢰도 점수 계산

- 기본: 50점
- 머리 깊이: 10%당 +5점 (최대 20점)
- 어깨 대칭성: (대칭성% - 90) × 1점 (최대 10점)
- 시간 대칭성: 최대 10점
- 패턴 상태: 돌파임박 +10점
- 거래량 가점: 20일 평균 대비 1.5배 초과 시 +10점

## 주의사항

- 본 도구는 기술적 분석 보조 목적으로만 사용하세요
- 투자 결정은 본인 책임 하에 이루어져야 합니다
- 과거 패턴이 미래 수익을 보장하지 않습니다
